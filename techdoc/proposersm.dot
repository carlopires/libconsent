digraph proposer {
  rankdir=LR;
  size="16,8"
  node [shape = circle];

  proposer_begin -> proposer_begin [ label = "queue empty" ];
  proposer_begin -> quorum_ACCEPTEDs [ label = "got value; are we leader? txmit ACCEPT!" ];
  proposer_begin -> quorum_PROMISEs [ label = "got value; are we not leader? txmit PROPOSE" ];

  quorum_ACCEPTEDs -> proposer_begin [ label = "got quorum?" ];
  quorum_ACCEPTEDs -> proposer_begin [ label = "ANACK? is our peer id higher? txmit value to input queue" ];
  quorum_ACCEPTEDs -> proposer_begin [ label = "ANACK? is our peer id lower?" ];
  quorum_ACCEPTEDs -> quorum_ACCEPTEDs [ label = "timeout? txmit ACCEPT!" ];

  quorum_PROMISEs -> quorum_ACCEPTEDs [ label = "got quorum? txmit ACCEPT!" ];
  quorum_PROMISEs -> proposer_begin [ label = "PNACK? is our peer id higher? txmit value to input queue" ];
  quorum_PROMISEs -> proposer_begin [ label = "PNACK? is our peer id lower?" ];
  quorum_PROMISEs -> quorum_PROMISEs [ label = "timeout? txmit PROPOSE" ];
}
